<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@elastic/request-converter</title><meta name="description" content="Documentation for @elastic/request-converter"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">@elastic/request-converter</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>@elastic/request-converter</h2></div><div class="tsd-panel tsd-typography"><a id="md:request-converter" class="tsd-anchor"></a><h1><a href="#md:request-converter">request-converter</a></h1><p>Library that converts Elasticsearch requests in Dev Console syntax to other formats.</p>
<p>Try it out <a href="https://elastic.github.io/request-converter">here</a>.</p>
<a id="md:installation" class="tsd-anchor"></a><h2><a href="#md:installation">Installation</a></h2><pre><code class="language-bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-2">@elastic/request-converter</span>
</code><button>Copy</button></pre>
<a id="md:usage" class="tsd-anchor"></a><h2><a href="#md:usage">Usage</a></h2><pre><code class="language-typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">convertRequests</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;@elastic/request-converter&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">devConsoleScript</span><span class="hl-1"> = </span><span class="hl-2">`GET /my-index-000001/_search?from=40&amp;size=20</span><br/><span class="hl-2">{</span><br/><span class="hl-2">  &quot;query&quot;: {</span><br/><span class="hl-2">    &quot;term&quot;: {</span><br/><span class="hl-2">      &quot;user.id&quot;: &quot;kimchy&quot;</span><br/><span class="hl-2">    }</span><br/><span class="hl-2">  }</span><br/><span class="hl-2">}`</span><br/><br/><span class="hl-5">async</span><span class="hl-1"> </span><span class="hl-5">function</span><span class="hl-1"> </span><span class="hl-0">main</span><span class="hl-1">() {</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">code</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">convertRequests</span><span class="hl-1">(</span><span class="hl-4">devConsoleScript</span><span class="hl-1">, </span><span class="hl-2">&quot;python&quot;</span><span class="hl-1">, {</span><br/><span class="hl-1">    </span><span class="hl-4">checkOnly:</span><span class="hl-1"> </span><span class="hl-5">false</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">printResponse:</span><span class="hl-1"> </span><span class="hl-5">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">complete:</span><span class="hl-1"> </span><span class="hl-5">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">elasticsearchUrl:</span><span class="hl-1"> </span><span class="hl-2">&quot;http://localhost:9200&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">code</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">main</span><span class="hl-1">();</span>
</code><button>Copy</button></pre>
<p>The list of available formats that can be passed in the second argument can be
obtained as follows:</p>
<pre><code class="language-typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">listFormats</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;@elastic/request-converter&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">formats</span><span class="hl-1"> = </span><span class="hl-0">listFormats</span><span class="hl-1">();</span>
</code><button>Copy</button></pre>
<p>The ouput code in the example above would look like this:</p>
<pre><code class="language-python"><span class="hl-3">import</span><span class="hl-1"> os</span><br/><span class="hl-3">from</span><span class="hl-1"> elasticsearch </span><span class="hl-3">import</span><span class="hl-1"> Elasticsearch</span><br/><br/><span class="hl-1">client = Elasticsearch(</span><br/><span class="hl-1">    </span><span class="hl-4">hosts</span><span class="hl-1">=[</span><span class="hl-2">&quot;http://localhost:9200&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">    </span><span class="hl-4">api_key</span><span class="hl-1">=os.getenv(</span><span class="hl-2">&quot;ELASTIC_API_KEY&quot;</span><span class="hl-1">),</span><br/><span class="hl-1">)</span><br/><br/><span class="hl-1">resp = client.search(</span><br/><span class="hl-1">    </span><span class="hl-4">index</span><span class="hl-1">=</span><span class="hl-2">&quot;my-index-000001&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">from_</span><span class="hl-1">=</span><span class="hl-2">&quot;40&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">size</span><span class="hl-1">=</span><span class="hl-2">&quot;20&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">query</span><span class="hl-1">={</span><br/><span class="hl-1">        </span><span class="hl-2">&quot;term&quot;</span><span class="hl-1">: {</span><br/><span class="hl-1">            </span><span class="hl-2">&quot;user.id&quot;</span><span class="hl-1">: </span><span class="hl-2">&quot;kimchy&quot;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">)</span>
</code><button>Copy</button></pre>
<p>When using Node and JavaScript, you can import the functions in this library as
follows:</p>
<pre><code class="language-typescript"><span class="hl-5">const</span><span class="hl-1"> { </span><span class="hl-6">convertRequests</span><span class="hl-1">, </span><span class="hl-6">listFormats</span><span class="hl-1"> } = </span><span class="hl-0">require</span><span class="hl-1">(</span><span class="hl-2">&quot;@elastic/request-converter&quot;</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<a id="md:available-formats" class="tsd-anchor"></a><h2><a href="#md:available-formats">Available Formats</a></h2><p>At this time the converter supports <code>curl</code>, <code>python</code>, <code>javascript</code>, <code>php</code> and <code>ruby</code>. Work is currently in
progress to add support for more languages.</p>
<a id="md:curl" class="tsd-anchor"></a><h3><a href="#md:curl">curl</a></h3><p>The curl exporter generates commands for the terminal using the
<a href="https://curl.se/">curl</a> command line HTTP client.</p>
<p>Supported options:</p>
<table>
<thead>
<tr>
<th>Option name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>elasticsearchUrl</code></td>
<td><code>string</code></td>
<td>no</td>
<td>The Elasticsearch endpoint to use in the generated commands. The default is <code>http://localhost:9200</code>.</td>
</tr>
<tr>
<td><code>otherUrls</code></td>
<td><code>Record&lt;string, string&gt;</code></td>
<td>no</td>
<td>URLs for other services. For Kibana, use <code>{kbn: &quot;http://localhost:5601&quot;}</code></td>
</tr>
<tr>
<td><code>windows</code></td>
<td><code>boolean</code></td>
<td>no</td>
<td>If <code>true</code>, use PowerShell escaping rules for quotes. If <code>false</code>, use bash/zsh escaping rules. The default is <code>false</code>.</td>
</tr>
</tbody></table>
<a id="md:python" class="tsd-anchor"></a><h3><a href="#md:python">python</a></h3><p>The Python exporter generates code for the Elasticsearch Python client.</p>
<p>Supported options:</p>
<table>
<thead>
<tr>
<th>Option name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>printResponse</code></td>
<td><code>boolean</code></td>
<td>no</td>
<td>If <code>true</code>, add code to print the response. The default is <code>false</code>.</td>
</tr>
<tr>
<td><code>complete</code></td>
<td><code>boolean</code></td>
<td>no</td>
<td>If <code>true</code>, generate a complete script. If <code>false</code>, only generate the request code. The default is <code>false</code>.</td>
</tr>
<tr>
<td><code>elasticsearchUrl</code></td>
<td><code>string</code></td>
<td>no</td>
<td>The Elasticsearch endpoint to use. The default is <code>http://localhost:9200</code>.</td>
</tr>
</tbody></table>
<a id="md:php" class="tsd-anchor"></a><h3><a href="#md:php">php</a></h3><p>The PHP exporter generates code for the Elasticsearch PHP client.</p>
<p>Supported options:</p>
<table>
<thead>
<tr>
<th>Option name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>printResponse</code></td>
<td><code>boolean</code></td>
<td>no</td>
<td>If <code>true</code>, add code to print the response. The default is <code>false</code>.</td>
</tr>
<tr>
<td><code>complete</code></td>
<td><code>boolean</code></td>
<td>no</td>
<td>If <code>true</code>, generate a complete script. If <code>false</code>, only generate the request code. The default is <code>false</code>.</td>
</tr>
<tr>
<td><code>elasticsearchUrl</code></td>
<td><code>string</code></td>
<td>no</td>
<td>The Elasticsearch endpoint to use. The default is <code>http://localhost:9200</code>.</td>
</tr>
</tbody></table>
<a id="md:ruby" class="tsd-anchor"></a><h3><a href="#md:ruby">ruby</a></h3><p>The Ruby exporter generates code for the Elasticsearch Ruby client.</p>
<p>Supported options:</p>
<table>
<thead>
<tr>
<th>Option name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>printResponse</code></td>
<td><code>boolean</code></td>
<td>no</td>
<td>If <code>true</code>, add code to print the response. The default is <code>false</code>.</td>
</tr>
<tr>
<td><code>complete</code></td>
<td><code>boolean</code></td>
<td>no</td>
<td>If <code>true</code>, generate a complete script. If <code>false</code>, only generate the request code. The default is <code>false</code>.</td>
</tr>
<tr>
<td><code>elasticsearchUrl</code></td>
<td><code>string</code></td>
<td>no</td>
<td>The Elasticsearch endpoint to use. The default is <code>http://localhost:9200</code>.</td>
</tr>
</tbody></table>
<a id="md:command-line-interface" class="tsd-anchor"></a><h2><a href="#md:command-line-interface">Command-Line Interface</a></h2><p>For convenience, a CLI that wraps the <code>convertRequests</code> function is also available.</p>
<pre><code class="language-bash"><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">echo</span><span class="hl-1"> </span><span class="hl-2">GET</span><span class="hl-1"> </span><span class="hl-2">/</span><span class="hl-1"> &gt; </span><span class="hl-2">request.txt</span><br/><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">node_modules/.bin/es-request-converter</span><span class="hl-1"> </span><span class="hl-5">--format</span><span class="hl-1"> </span><span class="hl-2">python</span><span class="hl-1"> </span><span class="hl-5">--complete</span><span class="hl-1"> &lt; </span><span class="hl-2">request.txt</span><br/><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">os</span><br/><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-2">elasticsearch</span><span class="hl-1"> </span><span class="hl-2">import</span><span class="hl-1"> </span><span class="hl-2">Elasticsearch</span><br/><br/><span class="hl-0">client</span><span class="hl-1"> </span><span class="hl-2">=</span><span class="hl-1"> </span><span class="hl-2">Elasticsearch</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-4">hosts</span><span class="hl-1">=</span><span class="hl-2">[os.getenv</span><span class="hl-1">(</span><span class="hl-0">&quot;ELASTICSEARCH_URL&quot;</span><span class="hl-1">)</span><span class="hl-2">],</span><br/><span class="hl-1">    </span><span class="hl-4">api_key</span><span class="hl-1">=</span><span class="hl-2">os.getenv</span><span class="hl-1">(</span><span class="hl-0">&quot;ELASTIC_API_KEY&quot;</span><span class="hl-1">)</span><span class="hl-2">,</span><br/><span class="hl-1">)</span><br/><br/><span class="hl-0">resp</span><span class="hl-1"> </span><span class="hl-2">=</span><span class="hl-1"> </span><span class="hl-2">client.info</span><span class="hl-1">()</span>
</code><button>Copy</button></pre>
<a id="md:using-a-custom-exporter" class="tsd-anchor"></a><h2><a href="#md:using-a-custom-exporter">Using a Custom Exporter</a></h2><p>Instead of passing the name of one of the available exporters, you can pass a
custom exporter instance.</p>
<p>To define a custom exporter format, create a class that implements the
<code>FormatExporter</code> interface. Here is an example exporter that outputs the name
of the API used in the request:</p>
<pre><code class="language-typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">FormatExporter</span><span class="hl-1">, </span><span class="hl-4">convertRequests</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;@elastic/request-converter&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">class</span><span class="hl-1"> </span><span class="hl-7">MyExporter</span><span class="hl-1"> </span><span class="hl-5">implements</span><span class="hl-1"> </span><span class="hl-7">FormatExporter</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">async</span><span class="hl-1"> </span><span class="hl-0">check</span><span class="hl-1">(</span><span class="hl-4">requests</span><span class="hl-1">: </span><span class="hl-7">ParsedRequest</span><span class="hl-1">[]): </span><span class="hl-7">Promise</span><span class="hl-1">&lt;</span><span class="hl-7">boolean</span><span class="hl-1">&gt; { </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-5">true</span><span class="hl-1">; }</span><br/><span class="hl-1">  </span><span class="hl-5">async</span><span class="hl-1"> </span><span class="hl-0">convert</span><span class="hl-1">(</span><span class="hl-4">requests</span><span class="hl-1">: </span><span class="hl-7">ParsedRequest</span><span class="hl-1">[], </span><span class="hl-4">options</span><span class="hl-1">: </span><span class="hl-7">ConvertOptions</span><span class="hl-1">): </span><span class="hl-7">Promise</span><span class="hl-1">&lt;</span><span class="hl-7">string</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">    </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-4">requests</span><span class="hl-1">.</span><span class="hl-0">map</span><span class="hl-1">(</span><span class="hl-4">req</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-4">req</span><span class="hl-1">.</span><span class="hl-4">api</span><span class="hl-1">).</span><span class="hl-0">join</span><span class="hl-1">(</span><span class="hl-2">&quot;</span><span class="hl-8">\n</span><span class="hl-2">&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">apis</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">convertRequests</span><span class="hl-1">(</span><span class="hl-2">&quot;GET /my-index/_search</span><span class="hl-8">\n</span><span class="hl-2">GET /</span><span class="hl-8">\n</span><span class="hl-2">&quot;</span><span class="hl-1">, </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">MyExporter</span><span class="hl-1">(), {});</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">apis</span><span class="hl-1">); </span><span class="hl-9">// outputs &quot;search\ninfo&quot;</span>
</code><button>Copy</button></pre>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-index-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><h4 class="uppercase">Member Visibility</h4><form><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div><div class="tsd-theme-toggle"><h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:request-converter"><span>request-<wbr/>converter</span></a><ul><li><a href="#md:installation"><span>Installation</span></a></li><li><a href="#md:usage"><span>Usage</span></a></li><li><a href="#md:available-formats"><span>Available <wbr/>Formats</span></a></li><li><ul><li><a href="#md:curl"><span>curl</span></a></li><li><a href="#md:python"><span>python</span></a></li><li><a href="#md:php"><span>php</span></a></li><li><a href="#md:ruby"><span>ruby</span></a></li></ul></li><li><a href="#md:command-line-interface"><span>Command-<wbr/>Line <wbr/>Interface</span></a></li><li><a href="#md:using-a-custom-exporter"><span>Using a <wbr/>Custom <wbr/>Exporter</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>@elastic/request-converter</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>